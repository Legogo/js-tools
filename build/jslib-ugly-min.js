function extend(a,b,c,d){a.prototype=b,b.apply(c,d)}function Debug(){this.logs=[],this.div,this.dContent,this.dLogs,this.updateLogs=function(){this.dLogs.html("");for(var a=Math.max(0,this.logs.length-10),b="",c=a;c<this.logs.length;c++)b+=c==a?this.logs[c]:"<br>"+this.logs[c];this.dLogs.html(b)},this.html=function(a){this.dContent.html(a)},this.appendContent=function(a){var b=this.dContent.html();b=a+"<br>"+b,this.dContent.html(b)},this.getRefs=function(){if(void 0==this.div){var a="<div id='debug' style='background-color:#333;color:#ddd;z-index:10000;position:fixed;top:0px;left:0px;opacity:0.9;'>";a+="<div id='debug-logs'></div>",a+="<div id='debug-content'></div>",a+="</div>",$("body").append(a),this.div=$("#debug"),this.dContent=$("#debug-content"),this.dLogs=$("#debug-logs")}},this.getRefs()}function Media(){$("#sound");this.setup=function(){this.addSoundPlayer()},this.addSoundPlayer=function(){if(null==this.snd){var a="<div id='sound'>";a+="<audio>",a+="</audio>",a+="</div>",$("body").append(a),this.snd=$("#sound")}this.audio=$("<audio>")},this.setup()}var ie=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),DEBUG;Debug.update=function(a){null==DEBUG&&(DEBUG=new Debug),DEBUG.html(a)},Debug.append=function(a){null==DEBUG&&(DEBUG=new Debug),DEBUG.appendContent(a)},Debug.log=function(a){null==DEBUG&&(DEBUG=new Debug),DEBUG.logs.push(a),DEBUG.updateLogs()},Debug.setup=function(a){DEBUG=new Debug,Debug.setVisibility(System.isLocalhost()),void 0!=a&&Input.assignKey(a,function(){DEBUG.div.toggle()})},Debug.setVisibility=function(a){a?DEBUG.div.show():DEBUG.div.hide()},Debug.hide=function(){Debug.setVisibility(!1)},Debug.show=function(){Debug.setVisibility(!0)},Display=function(){},Display.fixPNGs=function(){if(9>ie){var a;for(a in document.images)if(document.images[a].src){var b=document.images[a].src;".png"!==b.substr(b.length-4)&&".PNG"!==b.substr(b.length-4)||(document.images[a].style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='"+b+"')")}}},Display.onResize=function(a,b){var c={x:0,y:0},d=0,e=-1;window.onresize=function(f){e>-1||(e=setInterval(function(){var b=Resolution.getInnerViewportSize();c.x==b.x&&c.y==b.y||(c=b,d=3),d>0&&(d--,0>=d&&(clearInterval(e),e=-1,a()))},b))}};var INPUT;$(function(){INPUT=new Input}),Input=function(){this.onPressCallback=[],this.setup=function(){document.onkeydown=this.onKeyPress},this.onKeyPress=function(a){var b=Input.extractCharCode(a);b<INPUT.onPressCallback.length&&void 0!=INPUT.onPressCallback[b]&&INPUT.onPressCallback[b]()},this.setup()},Input.extractCharCode=function(a){a||(a=window.evt);var b=a.keyCode;return a.charCode&&0==b&&(b=a.charCode),b},Input.alertOnKey=function(){document.onkeydown=function(a){Input.extractCharCode(a);alert(keyCode)}},Input.assignKey=function(a,b,c){INPUT.onPressCallback[a]=b,void 0!=c&&console.log(a+" assigned for "+c)},Input.click=function(a,b){a.bind("click touchstart",b)},Input.unClick=function(a){a.unbind("click touchstart")},Input.setupAria=function(a,b){a.attr("tabindex",b)},Loading=function(){this.idx=0},Loading.loadScript=function(a,b){return void 0==a?void(void 0!=b&&b()):void $.getScript(a,b)},Loading.loadScripts=function(a,b,c){return this.idx>=b.length?void c():void this.loadScript(b[a],function(){this.loadScripts(this.idx+1,b,c)})},Log=function(){},Log.log=function(a){window.console||(window.console={log:function(){}});try{console.log(a)}catch(b){logWarning("LOG : "+a)}},Log.console=function(a,b){null==b&&(b="debug-normal"),$("<p class='debug-line' id='"+b+"'>"+a+"</p>").prependTo("#console")},Log.body=function(a){$('<div style="font-size:2em;font-weight:bold">'+a+"</div>").prependTo("body")},Log.alert=function(a){alert("WARNING<br/>"+a)},Log.warning=function(a){console.warn&&console.warn("[WARNING] :: "+a),logConsole(a,"debug-warning")},MathTools=function(){},MathTools.addMissingZeros=function(a){return 10>a?"0"+a:a},MathTools.sign=function(a){return 0>a?-1:a>0?1:0},MathTools.roundTo=function(a,b){return a=Math.floor(a*b),a/=b},MathTools.lerp=function(a,b,c){return a+c*(b-a)},MathTools.inverselerp=function(a,b,c){return(c-a)/(b-a)},MathTools.isNumeric=function(){return!isNaN(parseFloat(n))&&isFinite(n)};var MEDIA;Media.playSound=function(a){null==MEDIA&&(MEDIA=new Media);var b=MEDIA.audio;b.empty(),$("<source>").attr("src",a+".mp3").appendTo(b),b[0].load(),b[0].play()},Resolution=function(){this.SCREEN_REF_DIMENSIONS={vh:{fhd:{width:1080,height:1920},hd:{width:720,height:1280},med:{width:576,height:1024},low:{width:360,height:640}},hv:{fhd:{width:1920,height:1080},hd:{width:1280,height:720},med:{width:1024,height:576},low:{width:640,height:360}}}},Resolution.getScreenResolution=function(){return screen.width+" x "+screen.height},Resolution.getViewportDimensions=function(){return this.getInnerViewportSize()},Resolution.getViewportDimensionsCinema=function(){return resolution_getViewportClampedByRatio(9/16)},Resolution.getViewportClampedByRatio=function(a){var b=Resolution.getViewportDimensions();return b.y=b.x*a,b},Resolution.getScreenDimensionsByRatio=function(a,b){var c=Resolution.getViewportDimensions(),d=a/b,e=c.x/c.y,f={x:0,y:0};return d>e?(f.x=c.x,f.y=c.x/d):(f.y=c.y,f.x=c.y*d),f},Resolution.getClampedDimensions=function(){var a=Resolution.getViewportDimensions(),b=a.x>=a.y?SCREEN_REF_DIMENSIONS.hv:SCREEN_REF_DIMENSIONS.vh,c=a.x>=a.y;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];if(c){if(a.x>=e.width)return e}else if(a.y>=e.height)return e}return null},Resolution.getViewportSize=function(){var a,b;return"undefined"!=typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):(a=document.getElementsByTagName("body")[0].clientWidth,b=document.getElementsByTagName("body")[0].clientHeight),{x:a,y:b}},Resolution.getInnerViewportSize=function(){var a,b;return"BackCompat"===document.compatMode?(a=document.body.clientHeight,b=document.body.clientWidth):(a=document.documentElement.clientHeight,b=document.documentElement.clientWidth),{x:b,y:a}},Scroll=function(){this.scrollDiv="#scroll",this.scrollCallback=null,this.touchStart={x:0,y:0},this.touchSolvingDir=!1,this.touchPrevious={x:0,y:0},this.touchDelta={x:0,y:0},this.useScrollInterval=!1,this.scrollIntervalTime=100,this.scrollIntervalId=-1,this.scrollCount=0,this.touchMobile=!1,this.solvedDelta=0,this.mouseValues=[120,240,360,420,720,840,960,1080,1320,1680,1800,1920,2040,2280,2640,5520,7320],this.scrollIntervalUpate=function(a){return function(b){a.scrollCount>0&&SCROLL.scrollCallback(a.solvedDelta),a.scrollCount=0}},this.scrollIntervalId=setInterval(this.scrollIntervalUpate(this),this.scrollIntervalTime)};var SCROLL=new Scroll;Scroll.setup=function(a){SCROLL.scrollCallback=a,SCROLL.touchMobile=System.isMobile(),Scroll.bind_scroll_mobile(),Scroll.bind_scroll()},Scroll.allowToScroll=function(a){var b=a.toString(),c=!1;return b.indexOf("HtmlElement")>-1?!1:!c&&$(a).hasClass("noScroll")?!1:!c},Scroll.preventScrollingEvent=function(a){return Scroll.allowToScroll(a)?!!$(a).hasClass("scrollPrevent"):!0},Scroll.bind_scroll_mobile=function(){document.ontouchstart=function(a){Scroll.allowToScroll(a.target)&&(Scroll.preventScrollingEvent(a.target)&&Scroll.preventDefault(a),Scroll.touchStart=Scroll.extractEventPosition(a))},document.ontouchend=function(a){Scroll.allowToScroll(a.target)&&(Scroll.preventScrollingEvent(a.target)&&Scroll.preventDefault(a),Scroll.touchPrevious.x=Scroll.touchPrevious.y=0)},document.ontouchmove=function(a){if(Scroll.allowToScroll(a.target)){Scroll.preventScrollingEvent(a.target)&&Scroll.preventDefault(a);var b=Scroll.extractEventPosition(a);0==SCROLL.touchPrevious.x&&0==SCROLL.touchPrevious.y&&(SCROLL.touchPrevious.x=SCROLL.touchStart.x,SCROLL.touchPrevious.y=SCROLL.touchStart.y),SCROLL.touchDelta.x=b.x-SCROLL.touchPrevious.x,SCROLL.touchDelta.y=b.y-SCROLL.touchPrevious.y,SCROLL.touchPrevious.x=b.x,SCROLL.touchPrevious.y=b.y;var c=Math.abs(SCROLL.touchDelta.y);0!=c&&50>c&&Scroll.onScrollStep(SCROLL.touchDelta.y)}}},Scroll.extractEventPosition=function(a){return{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}},Scroll.bind_scroll=function(){var a=(document.documentElement,/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel");document.attachEvent?document.attachEvent("on"+a,Scroll.onWheel):document.addEventListener&&document.addEventListener(a,Scroll.onWheel,!1)},Scroll.onMouseUp=function(a){console.log("mouse up !")},Scroll.onMouseDown=function(a){console.log("mouse down")},Scroll.onWheel=function(a){var b=window.event||a,c=b.target||b.srcElement;if(Scroll.allowToScroll(c)){Scroll.preventScrollingEvent(c)&&Scroll.preventDefault(b);var d=b.detail?-120*b.detail:b.wheelDelta;Scroll.onScrollStep(d)}},Scroll.onScrollStep=function(a){var b=Math.abs(a);return SCROLL.useScrollInterval?SCROLL.mouseValues.indexOf(b)>-1?void SCROLL.scrollCallback(a):(SCROLL.scrollCount++,void(SCROLL.solvedDelta=a)):void SCROLL.scrollCallback(a)},Scroll.preventDefault=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1},Scroll.disableScroll=function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys},Scroll.enableScroll=function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null};var SYSTEM,orientationData={rotation:1e4,width:1e4,height:1e4};System=function(){this.rotationSwitchCallback,this.rotationLandCallback,this.rotationPortCallback},System.copyToClipboard=function(a){Copied=a.createTextRange(),Copied.execCommand("Copy")},System.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},System.isLocalhost=function(){var a=Web.getUrl();return a.indexOf("localhost")>-1?!0:a.indexOf("file:///")>-1?!0:a.indexOf("Users/")>-1?!0:a.indexOf("192.168")>-1},System.isMacbook=function(){},System.isMobile=function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)},System.isTouchDevice=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}return!1},System.bindRotation=function(a,b,c){null==SYSTEM&&(SYSTEM=new System),SYSTEM.rotationPortCallback=b,SYSTEM.rotationLandCallback=c,SYSTEM.rotationSwitchCallback=a,window.onresize=function(a){System.onDeviceRotation()},$(window).on({resize:function(a){System.onDeviceRotation()}}),document.attachEvent?document.attachEvent("orientationchange",System.onDeviceRotation):document.addEventListener&&document.addEventListener("orientationchange",System.onDeviceRotation,!1)},System.isLandscape=function(){return 90==Math.abs(window.orientation)},System.isPortrait=function(){return 0==window.orientation||180==window.orientation},System.onDeviceRotation=function(){var a=parseInt(window.orientation);a==orientationData.rotation&&orientationData.width==window.innerWidth&&orientationData.height==window.innerHeight||(orientationData.rotation=a,orientationData.width=window.innerWidth,orientationData.height=window.innerHeight,void 0!=SYSTEM.rotationSwitchCallback&&SYSTEM.rotationSwitchCallback(),90==Math.abs(a)&&void 0!=SYSTEM.rotationLandCallback&&SYSTEM.rotationLandCallback(),0!=a&&180!=a||void 0!=SYSTEM.rotationPortCallback&&SYSTEM.rotationPortCallback())},System.getBrowserInfoData=function(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],{name:"IE",version:a[1]||""}):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!=a)?{name:"Opera",version:a[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),{name:c[0],version:c[1]})},System.getBrowserInfo=function(){var a=System.getBrowserInfoRaw();return"appName = "+a.appName+" <br/> appVersion = "+a.appVersion+" <br/> userAgent = "+a.userAgent},System.getBrowserInfoRaw=function(){return{appName:navigator.appName,appVersion:navigator.appVersion,userAgent:navigator.userAgent}},Web=function(){},Web.getUrl=function(){return document.URL.toLowerCase()},Web.getUrlNoPage=function(){var a=Web.getUrl(),b=0,c=-1;do b=a.indexOf("/",b+1),b>-1&&(c=b+1);while(b>-1&&b<a.length);var d=a.slice(0,c);return d},Web.getUrlLanguage=function(a){Web.getUrl();return document.URL.indexOf("/fr")>=0||document.URL.indexOf("?fr")>=0?"fr":document.URL.indexOf("/en")>=0||document.URL.indexOf("?en")>=0?"en":document.URL.indexOf("/de")>=0||document.URL.indexOf("?de")>=0?"de":a},Web.getUrlParam=function(a){void 0==a&&(a="?");var b=Web.getUrl(),c=b.split("/");return c=c[c.length-1].split(a),c[c.length-1]};