<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>JS-LIB</title>
    
    <meta charset="UTF-8" />

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.12.0.min.js"></script>

    <script type="text/javascript" src="js/Base.js"></script>
    <script type="text/javascript" src="js/Display.js"></script>
    <script type="text/javascript" src="js/Loading.js"></script>
    <script type="text/javascript" src="js/Log.js"></script>
    <script type="text/javascript" src="js/MathTools.js"></script>
    <script type="text/javascript" src="js/Mobile.js"></script>
    <script type="text/javascript" src="js/Resolution.js"></script>
    <script type="text/javascript" src="js/Scroll.js"></script>
    <script type="text/javascript" src="js/System.js"></script>
    <script type="text/javascript" src="js/Web.js"></script>
    <script type="text/javascript" src="js/Input.js"></script>
    <script type="text/javascript" src="js/Media.js"></script>
    <script type="text/javascript" src="js/Debug.js"></script>

    <style>
      #test{
        position:absolute;
        top:0px;
        right:0px;
        height:100%;
        background-color: #f22;
        width:600px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      #global{
        width:100%;
        height:100%;
        top:0px;
        left:0px;
        position: absolute;
        background-color:#2d2;
      }

      #progress{
        z-index:1000;
        position:fixed;
        top:10px;
        left:500px;
        background-color: #111;
        width:200px;
        height:20px;
      }
      #progress-content{
        background-color: #ccc;
        height:20px;
      }

    </style>
  </head>
  <body>

    <script>
      
      $(function(){
        console.log("ready");

        //console.log(Web.getUrlNoPage());

        //test_media();

        test_Scroll();

        //test_Resolution();

        //test_resize();

        //test_input();

        //test_web();
      });

      function test_media(){

        Input.assignKey(32, function(){
          Media.playSound("sound_A");
        });
        Input.assignKey(40, function(){
          Media.playSound("sound_B");
        });
        
      }
      
      function test_web(){
        console.log(Web.getUrl());
        console.log(Web.getUrlParam());
      }

      function test_input(){
        

        Input.assignKey(40, function(){
          alert("down");
        });

        Input.assignKey(32, function(){
          alert("lol");
        });
        
        //Input.alertOnKey();
      }

      function test_resize(){
        Display.onResize(function(){
          var dim = Resolution.getViewportDimensions();
          $("#debug").css({width:dim.x+"px", height:dim.y+"px"});
        }, 10);
      }

      function test_Resolution(){
        $("body").css({overflow:"hidden"});
        
        setInterval(function(){
          var dim = Resolution.getViewportDimensions();
          $("#debugC").css({width:dim.x+"px", height:dim.y+"px"});
          
          var ref = [1280,720];
          $("#debugB").css({width:ref[0]+"px", height:ref[1]+"px"});
          
          dim = Resolution.getScreenDimensionsByRatio(ref[0],ref[1]);
          $("#debug").css({width:dim.x+"px", height:dim.y+"px"});

        },300);

      }

      function test_Scroll(){
        Debug.setup();
        Debug.log("Mobile ? "+System.isMobile());
        Scroll.setup(scrollBinded);
      }

      var progress = 0;

      function scrollBinded(dir){
        //console.log(dir);
        
        //var w = $("#progress-content").width();
        progress += 0.05 * MathTools.sign(dir);
        //console.log(progress);
        progress = Math.min(progress, 1);
        progress = Math.max(progress, 0);

        $("#progress-content").width($("#progress").width() * progress);
      }

    </script>
    
    <div id="global" class="scrollPrevent"></div>

    <div id="progress"><div id="progress-content"></div></div>

    <div id="test">
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>midpoint
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>blah
      <br/>endpoint
    </div>
  </body>
</html>
